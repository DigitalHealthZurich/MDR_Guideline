---
layout: default
title: Search Results
permalink: /search-results.html
---

<h1>Search Results</h1>
<p>Showing results for: <span id="search-query"></span></p>
<ul id="search-results-list"></ul>

<script>
  document.addEventListener("DOMContentLoaded", function () {
  let params = new URLSearchParams(window.location.search);
  let query = params.get("q");
  let resultsContainer = document.getElementById("search-results-list");

  if (query) {
    document.getElementById("search-query").textContent = query;

    fetch('/search.json')
      .then(response => response.json())
      .then(data => {
        const idx = lunr(function () {
          this.ref('url');
          this.field('title');
          this.field('content');

          data.forEach(doc => {
            if (doc.title) { // Ensure title exists
              this.add(doc);
            }
          });
        });

        let results = idx.search(query);
        resultsContainer.innerHTML = '';

        if (results.length === 0) {
          resultsContainer.innerHTML = '<p>No results found.</p>';
        } else {
          results.forEach(result => {
            let item = data.find(doc => doc.url === result.ref);
            if (item) {
              let li = document.createElement("li");
              li.innerHTML = `<a href="${item.url}">${item.title}</a>`;
              resultsContainer.appendChild(li);
            }
          });
        }
      })
      .catch(error => console.error("Error loading search.json:", error));
  }
});

</script>
